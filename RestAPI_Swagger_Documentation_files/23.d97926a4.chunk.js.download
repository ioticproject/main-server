(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("efbE"),c=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],r=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return c.includes(e)?e:"en"},i=function getTrendingGiphys(e){return a.h.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.h.get("/search",{params:{limit:t,q:e,lang:r(n),rating:"pg"}})}},MWt3:function(e,t,n){},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return r});var a=n("efbE"),c=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},r=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),c=n("rAc1"),r=n("l6A5"),i=function urlIdentity(e){return Object(c.a)(e)},o=(Object(r.a)(i,function(e){return a.k.get("/",{params:{url:encodeURI(e)}})}),Object(r.a)(i,function(e){return a.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),c=n("WwEg"),r=n("s8DI"),i=n("nJ3u"),o=n("O94r"),s=n.n(o),u=n("7IKl"),l=n("lE29"),d=n("ERkP"),m=n.n(d),f=n("Tr4L"),b=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(l.a)().widgetBackgroundAlpha,n=Object(b.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,c=void 0!==a&&a,r=n.userId,i=Object(u.a)(r);return c?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=n("ZGTz"),v=n("oImb"),O=n("+Kbs"),j=n("908p"),h=n("nQD+"),E=n("HXmn"),y=n("mZ4K"),w=n("P+wr"),A=n("6wvX"),k=n("z24s"),I=n("jITz"),T=n("6rzO"),C=n("58kB"),N=n("uQkC"),L=n("hNWd"),S=n("+oIK"),B=n("LVcX"),U=n("U505"),R=n("ovDp"),M=n("vwUF"),z=n("0lfv");n("IuzP");n.d(t,"a",function(){return F});var F,_="GIF",x="TEXT",P=function validateMessageText(e){return e&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(F||(F={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,o=e.state,u=void 0===o?F.AVAILABLE:o,D=e.disabled,V=void 0!==D&&D,H=e.chatHidden,G=Object(d.useRef)(null),K=Object(d.useRef)(null),W=Object(d.useRef)(null),Z=Object(d.useRef)(null),J=Object(d.useState)(""),X=Object(r.a)(J,2),q=X[0],Q=X[1],Y=Object(d.useState)(!1),$=Object(r.a)(Y,2),ee=$[0],te=$[1],ne=Object(d.useState)([]),ae=Object(r.a)(ne,2),ce=ae[0],re=ae[1],ie=Object(k.a)(G),oe=Object(k.a)(K),se=Object(k.a)(W),ue=Object(k.a)(Z),le=Object(b.c)(function(e){return e.view}),de=le.matchedHours,me=le.chatOpen,fe=Object(b.c)(function(e){return e.conversations.attachments}),be=Object(b.c)(function(e){return e.session.endUser.id}),ge=Object(b.c)(function(e){return Object(B.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,pe=Object(f.a)().t,ve=Object(A.a)(!0),Oe=Object(y.a)(),je=Object(l.a)(),he=je.activeColor,Ee=je.widgetBackgroundColor,ye=Object(C.a)(Oe).recipient,we=Object(T.a)({inputRef:G}),Ae=we.pastedFiles,ke=we.clearFiles,Ie=Object(I.a)({targetKey:"Enter"}),Te=Object(N.a)({activeConversationId:n}),Ce=Te.sendTypingStarted,Ne=Te.sendTypingFinished,Le=Object(w.a)({activeConversation:n,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){re(function(t){return[].concat(Object(c.a)(t),Object(c.a)(e))}),ke()},[])}),Se=Le.attachmentState,Be=Le.uploadAttachments,Ue=Le.resetAttachmentState,Re=u===F.AVAILABLE||u===F.AVAILABLE_BUTTONS,Me=Object(R.a)({onDrop:Be,disabled:V||!Re||!ge}),ze=Me.getRootProps,Fe=Me.getInputProps,_e=Me.open,xe=P(q)||ce.length,Pe=Se===M.b.PENDING,De=Se===M.b.ERROR||Se===M.b.SIZE_ERROR;var Ve=Object(d.useCallback)(function(e){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,r=ce?{attachments:ce}:{},i=n?{}:{sentWelcomeMessage:de};Ne();var o=c===x?Object(z.r)(e):e;t({message:Object(S.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:be,attributes:i},r))}),Q(""),re([]),Ue()},[n,be,de,t,Ue,Ne,ce]);Object(d.useEffect)(function(){ge?Ae.length&&!Pe&&Be(Ae):ke()},[ge,Pe,ke,Ae,Be]),Object(d.useEffect)(function(){Ie&&(P(q)||ce.length)&&Ve(q,x)},[Ie,q,Ve,ce.length]),Object(d.useEffect)(function(){n&&Q("")},[n]),Object(d.useEffect)(function(){var e=G,t=u===F.AVAILABLE_BUTTONS;return me&&Re&&!t&&!H&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[H,me,Re,u]);var He=Object(d.useMemo)(function(){return Re?pe("composer.replyToPlaceholder",{name:ye.name}):pe(u===F.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Re,ye.name,u,pe]),Ge=ge&&!!n,Ke=!xe&&!!n,We=!!xe,Ze=Ge||We||Ke,Je=V||Pe;return m.a.createElement(m.a.Fragment,null,(ce.length||Pe||De)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},De&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},pe(Se===M.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(h.a,{onClick:function onClick(){Ue(),ke()},className:"drift-widget-attachment-send-status--close",disabled:V},m.a.createElement(O.j,{width:10,height:10}))),(ce.length||Pe)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(c.a)(ce),Object(c.a)(Pe?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:fe[e]?fe[e].id:"file-upload-loader"},fe[e]&&!fe.pending&&m.a.createElement(h.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){re(function(t){return Object(U.a)([e],t)})}(e)},disabled:V},m.a.createElement(O.j,{width:6,height:6})),fe[e]&&!fe.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(O.k,{width:16,height:16})):null}(fe[e]):m.a.createElement(E.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(Ee,he),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(he,24,-2),"\n          }\n\n          .drift-widget-composer-actions button.keyboard-focused,\n          .drift-widget-composer-send-button.keyboard-focused {\n            ").concat(Object(i.c)(he),"\n          }\n        ")),m.a.createElement("div",Object.assign({},ze({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":ve}),tabIndex:-1}),ge&&m.a.createElement("input",Fe()),m.a.createElement(g,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,Re&&q.length?q:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},He),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":ie}),ref:G,placeholder:He,value:Re?q:"",onChange:function onTextareaChange(e){Ie||Ae.length||(Q(e.target.value),Ce())},"aria-label":"message composer",maxLength:4096,disabled:V||!Re||!!Ae.length,tabIndex:0,id:"drift-widget-composer-input"}),Re&&!ve&&m.a.createElement("button",{ref:K,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":oe}),onClick:function onEmojiButtonClick(){u!==F.AVAILABLE||V||te(!ee)},disabled:V,"aria-expanded":ee,"aria-label":"emojis"},m.a.createElement(L.a,null))),Re&&!ve&&m.a.createElement(p.a,{open:ee,onAddEmoji:function onAddEmoji(e){te(!ee),Re&&!V&&(Q(e),G.current&&G.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){K.current&&K.current.contains(e.target)||te(!1)}}),Re&&Ze&&m.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":Ge&&(Ke||We)})},Ge&&m.a.createElement("button",{ref:W,className:s()({"keyboard-focused":se}),onClick:_e,"aria-label":"add an attachment",disabled:V},m.a.createElement(O.a,null)),Ke&&m.a.createElement(v.a,{onAddGiphy:function onAddGiphy(e){return Ve(e,_)},disabled:V}),We&&m.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":Je,"keyboard-focused":ue}),"aria-label":"send message",onClick:function onClick(){return Ve(q,x)},disabled:V||Pe,ref:Z},m.a.createElement(j.a,{color:"#".concat(he)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("efbE"),c=function recordConsent(e,t){return a.e.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l});var a=n("WwEg"),c=n("efbE"),r=n("JBtm"),i=n.n(r),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,r=void 0===n?[]:n,o=e.meetingType,s=e.start,u=e.orgMeetingType;return c.m.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(r),orgMeetingType:u},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},s=function fetchCompanyAvailability(e){var t=e.orgMeetingType,n=e.agentIds,a=void 0===n?[]:n;return c.m.get("/scheduling/availability/combined/v2",{params:{orgMeetingType:t,agentIds:a},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},u=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,r=e.meetingType,i=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,u=e.orgMeetingType;return c.m.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:i,meetingType:r,timeZone:t,bookedByUserId:s,orgMeetingType:u}})},l=function scheduleCompanyMeeting(e){var t=e.availabilitySlot,n=e.availableAgents,a=e.conversationId,r=e.meetingSource,i=e.meetingType,o=e.endUserTimeZone,s=e.bookedByUserId,u=e.orgMeetingType;return c.m.post("/scheduling/schedule/combined",{availabilitySlot:t,availableAgents:n,conversationId:a,meetingSource:r,meetingType:i,endUserTimezone:o,bookedByUserId:s,orgMeetingType:u})}},"tGI+":function(e,t,n){"use strict";var a=n("mj2O"),c=n.n(a),r=n("7SM1"),i=n("s8DI"),o=n("NJA7"),s=n("fw6E"),u=n("K7i0"),l=n("+oIK"),d=n("da4L"),m=n("ERkP"),f=n.n(m),b=n("uDfI"),g=n("0lfv");n("yAze");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,a=t.id,p=t.conversationId,v=Object(b.b)(),O=Object(b.c)(function(e){return e.session}).endUser,j=Object(s.a)().conversationHistoryOpen,h=Object(b.c)(function(e){return e.view}).chatOpen,E=Object(m.useState)(!h),y=Object(i.a)(E,2),w=y[0],A=y[1],k=Object(d.k)(t)&&h,I=function doSendMessage(e){var n=e.label;return function(){var e=Object(l.a)({message:n,activeConversation:p,authorId:O.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId}});v(Object(u.m)({message:e}))}};Object(m.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(r.a)(c.a.mark(function _callee(){return c.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!h||w){e.next=4;break}return e.next=3,Object(g.q)(500);case 3:A(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[w,h]);var T=w?"visible":"hidden";return f.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(T)},n.buttons.map(function(e,t){return f.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(a,"-").concat(t)},f.a.createElement(o.a,{onClick:I(e),invertOnHover:!0,forceFocus:0===t&&k,disabled:j,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}},vkRn:function(e,t,n){"use strict";var a=n("nJ3u"),c=n("O94r"),r=n.n(c),i=n("noex"),o=n("yEsl"),s=n("fw6E"),u=n("z24s"),l=n("hhdZ"),d=n("58kB"),m=n("6fy/"),f=n("SsZN"),b=n("Wjfv"),g=n("K7i0"),p=n("da4L"),v=n("LVcX"),O=n("i9gz"),j=n("ERkP"),h=n.n(j),E=n("Tr4L"),y=n("uDfI"),w=n("A5mO"),A=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(s.a)().onToggleConversationHistory,c=Object(j.useRef)(null),A=Object(E.a)().t,k=Object(u.a)(c),I=Object(y.b)(),T=Object(m.a)(),C=Object(j.useMemo)(function(){return Object(v.a)(null,["conversation","id"],n)},[n]),N=Object(l.a)(C),L=Object(j.useMemo)(function(){return Object(v.a)(null,["authorId"],N)},[N]),S=Object(d.a)(L).recipient,B=Object(p.h)(N);if(Object(O.a)(N))return null;var U=N.createdAt,R=N.attributes,M=void 0===R?{}:R,z=Object(w.a)(U).isAfter(w.a.today())?Object(w.a)(U).unixFmt(A("dt.format.time.short")):Object(w.a)(U).unixFmt(A("dt.format.date.short")),F=B?T.name:S.name,_="Conversation with ".concat(S.name).concat(M.preview?" - ".concat(B?"You":"",': "').concat(M.preview,'"'):"",", ").concat(z," - Click to open");return h.a.createElement("li",{className:r()("drift-widget-conversation-list-item",{"keyboard-focused":k})},h.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(a(!1),I(Object(b.a)()),I(Object(g.n)({conversationId:e})),Object(f.f)(e))}}(n.conversation.id),"aria-label":_,ref:c},B?h.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):h.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:S.avatarUrl,id:L}),h.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},h.a.createElement("h2",null,F),h.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},z),h.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},M.preview))))}),k=n("lE29"),I=n("DboL"),T=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),n=Object(j.useMemo)(function(){return Object(T.c)(Object(I.a)(t),"updatedAt")},[t]),c=Object(j.useMemo)(function(){return h.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return h.a.createElement(A,{key:e.conversation.id,conversation:e})}))},[n]),i=Object(k.a)().activeColor;return h.a.createElement("div",{className:r()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},h.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(a.c)(i),"\n          }\n        ")),e&&c)}},xyhj:function(e,t,n){"use strict";var a=n("nfbA"),c=n("nJ3u"),r=n("O94r"),i=n.n(r),o=n("z24s"),s=n("o3t1"),u=n("lE29"),l=n("ERkP"),d=n.n(l),m=n("uDfI"),f=n("PjZB"),b=n("7oto"),g=n("rTkt");n("MWt3");t.a=function CtaButton(e){var t=e.ctaUrl,n=e.ctaCopy,r=e.ctaType,p=e.onClick,v=e.ariaHidden,O=Object(s.a)(),j=O.hoverProps,h=O.isHovered,E=Object(u.a)(),y=E.activeColor,w=E.backgroundStyles,A=Object(m.c)(function(e){return e.campaigns.activeCampaign}),k=Object(l.useRef)(null),I=Object(o.a)(k),T=Object(l.useMemo)(function(){var e=h?Object(g.c)(w.background,-5):w.background;return Object(a.a)(Object(a.a)({},w),{},{background:e})},[w,h]),C=function onCtaClick(e){r===f.a.CHAT_RESPONSE?Object(b.a)({topic:"drift-api:open-chat"}):r===f.a.SCHEDULE_MEETING&&Object(b.a)({topic:"drift-api:schedule-meeting",message:{scheduleMeetingWith:A.attributes.senderId,options:{activeCampaign:A}}}),p&&p(e)};return Object(l.useEffect)(function(){var e=k;return setTimeout(function(){return e.current&&e.current.focus()},50),function(){return e.current&&e.current.blur()}},[]),r===f.a.LINK_TO_URL?d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n            .drift-widget-announcement-cta-link-wrapper a.keyboard-focused {\n              ".concat(Object(c.d)("FFFFFF",y),"\n            }\n          ")),d.a.createElement("div",{className:"drift-widget-announcement-cta drift-widget-announcement-cta-link-wrapper",hidden:v},d.a.createElement("a",Object.assign({className:i()("drift-widget-announcement-cta-link",{"keyboard-focused":I&&!v}),href:t,onClick:C,target:"_blank",rel:"noopener noreferrer",ref:k,"aria-describedby":"drift-widget-announcement-cta-description",style:T,"aria-hidden":v},j),n),d.a.createElement("span",{hidden:!0,id:"drift-widget-announcement-cta-description"},n+"; opens an external site in a new window"))):d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n          .drift-widget-announcement-cta.keyboard-focused {\n            ".concat(Object(c.d)("FFFFFF",y),"\n          }\n        ")),d.a.createElement("button",Object.assign({className:i()("drift-widget-announcement-cta",{"keyboard-focused":I}),onClick:C,style:T,ref:k},j),n))}},yAze:function(e,t,n){}}]);